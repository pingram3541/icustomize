!function(a,b){var c;c={queriedPost:new b.Value};var d='<div id="customize-resizer"><div class="control-pane"><div class="control-editor-item editor-width" title="Editor Panel Custom Width"><div class="control-editor-spacer"></div><i class="fa fa-caret-square-o-left editor"></i><div class="control-input-slide"><span class="control-input-title">Editor Custom Width (px):</span><input type="number" /></div></div></div><div class="resize-pane"><div class="control-editor-item preview-width" title="Preview Panel Custom Width"><div class="control-editor-spacer"></div><i class="fa fa-caret-square-o-right preview"></i><div class="control-input-slide"><span class="control-input-title">Preview Custom Width (px):</span><input type="number" /></div></div><div class="control-editor-item preview-desktop" title="Full > 1240px"><i class="fa fa-desktop"></i></div><div class="control-editor-item preview-laptop" title="Laptop < 1240px"><i class="fa fa-laptop"></i></div><div class="control-editor-item preview-tablet" title="Tablet < 768px"><i class="fa fa-tablet"></i></div><div class="control-editor-item preview-mobile" title="Mobile < 480px"><i class="fa fa-mobile"></i></div></div></div>',e=function(){var a=0;return function(b,c){clearTimeout(a),a=setTimeout(b,c)}}();b.bind("ready",function(){b.previewer.bind("queried-post",function(a){c.queriedPost.set(a||!1)})}),c.queriedPost.bind(function(b,c){var h=(a("body [id^=customize-control-icustomize-page-css] .customize-control-title"),a("body [id^=customize-control-icustomize-page-js] .customize-control-title"),a("body [id^=customize-control-icustomize-page-css] .customize-control-description"),a("body [id^=customize-control-icustomize-page-js] .customize-control-description"),a("body [id^=customize-control-icustomize-page-css] .CodeMirror")),i=a("body [id^=customize-control-icustomize-page-js] .CodeMirror"),j=h[0].CodeMirror,k=i[0].CodeMirror;if(b.ID){window.pid=b.ID.toString(),window.meta=b.meta,window.theme=b.theme;var n=(a("#customize-preview iframe").contents().find("#icustomize-page-css-"+window.theme),a("#customize-preview iframe").contents().find("#icustomize-page-js-"+window.theme),""),o="";n=window.meta["icustomize-page-css-"+window.theme],n?j.setValue(n.toString()):j.setValue(""),o=window.meta["icustomize-page-js-"+window.theme],o?k.setValue(o.toString()):k.setValue("")}else window.theme=b.theme}),wp.customize.controlConstructor.code=wp.customize.Control.extend({ready:function(){var d,a=this,b=a.container.find(".kirki-codemirror-editor"),c=a.params.choices.language;"html"===a.params.choices.language&&(c={name:"htmlmixed"}),d=CodeMirror.fromTextArea(b[0],{value:a.setting._value,mode:c,lineNumbers:!0,theme:a.params.choices.theme,height:a.params.choices.height+"px"});var e={"Alt-F":"findPersistent"};d.setOption("value",a.setting._value),d.setOption("mode",a.params.choices.language),d.setOption("lineNumbers",!0),d.setOption("theme",a.params.choices.theme),d.setOption("height",a.params.choices.height+"px"),d.addKeyMap(e),d.on("change",function(){if(b.closest("li").attr("id")=="customize-control-icustomize-page-css-"+window.theme||b.closest("li").attr("id")=="customize-control-icustomize-page-js-"+window.theme){var c={postid:window.pid,theme:window.theme,data:d.getValue()};a.setting.set(c)}else a.setting.set(d.getValue())}),b.parents(".accordion-section").on("click",function(){d.refresh()})}}),a(document).ready(function(){function u(){f=a("#customize-preview"),g=a("#customize-preview iframe");var c,d,b=f.width();g.css("max-width")?(c=parseFloat(g.css("max-width")),d=.5*(b-c)):d=0,a("#preview-resize-left").css("left",d+"px")}var b=a(".wp-full-overlay.expanded"),c=a(".wp-full-overlay-sidebar"),f=a("#customize-preview"),g=a("#customize-preview iframe");if(a("body [id^=customize-control-icustomize-icustomize-master-css] .CodeMirror").length)var h=a("body [id^=customize-control-icustomize-icustomize-master-css] .CodeMirror")[0].CodeMirror;if(a("body [id^=customize-control-icustomize-icustomize-master-js] .CodeMirror").length)var i=a("body [id^=customize-control-icustomize-icustomize-master-js] .CodeMirror")[0].CodeMirror;if(a("body [id^=customize-control-icustomize-icustomize-wc-master-css] .CodeMirror").length)var j=a("body [id^=customize-control-icustomize-icustomize-wc-master-css] .CodeMirror")[0].CodeMirror;if(a("body [id^=customize-control-icustomize-icustomize-wc-master-js] .CodeMirror").length)var k=a("body [id^=customize-control-icustomize-icustomize-wc-master-js] .CodeMirror")[0].CodeMirror;if(a("body [id^=customize-control-icustomize-page-css] .CodeMirror").length)var l=a("body [id^=customize-control-icustomize-page-css] .CodeMirror")[0].CodeMirror;if(a("body [id^=customize-control-icustomize-page-js] .CodeMirror").length)var m=a("body [id^=customize-control-icustomize-page-js] .CodeMirror")[0].CodeMirror;var r,n=g.contents().find("#icustomize-master-css-"+window.theme),p=(g.contents().find("#icustomize-master-js"+window.theme),g.contents().find("#icustomize-wc-master-css-"+window.theme));g.contents().find("#icustomize-wc-master-js"+window.theme);a("#customize-controls").append(d),a("#customize-controls").prepend('<div class="dragbar"></div>'),a("body").on("click",".control-editor-item i",function(b){b.stopPropagation(),g=a("#customize-preview iframe"),a(b.target).parent().hasClass("active")?a(b.target).parent().removeClass("active"):(a(".control-editor-item").removeClass("active"),a(b.target).not(".fa-desktop, .fa-laptop, .fa-tablet, .fa-mobile").parent().addClass("active")),a(b.target).hasClass("editor")||a(b.target).hasClass("preview")||(a(b.target).hasClass("fa-desktop")?(g.css({"max-width":""}),a(".preview-width input").val(""),a("#preview-resize-left").css("left","")):a(b.target).hasClass("fa-laptop")?(g.css({"max-width":"1239px"}),a(".preview-width input").val("1239"),u()):a(b.target).hasClass("fa-tablet")?(g.css({"max-width":"767px"}),a(".preview-width input").val("767"),u()):a(b.target).hasClass("fa-mobile")&&(g.css({"max-width":"479px"}),a(".preview-width input").val("479"),u()))}),a("body").on("change, keyup",".preview-width input",function(b){g=a("#customize-preview iframe"),e(function(){var c=a(b.target).val();c>="0"?(g.css({"max-width":c+"px"}),u()):(g.css({"max-width":""}),u())},500)}),a("body").on("change, keyup",".editor-width input",function(d){b=a(".wp-full-overlay.expanded"),c=a(".wp-full-overlay-sidebar"),e(function(){var e=a(d.target).val();e>="0"?(b.css({"margin-left":e+"px"}),c.css({width:e+"px"}),u()):(b.css({"margin-left":"600px"}),c.css({width:"600px"}),u())},500)}),a("body").on("click","#accordion-section-icustomize_master_css h3.accordion-section-title, #accordion-section-icustomize_master_js h3.accordion-section-title, #accordion-section-icustomize_page_css h3.accordion-section-title, #accordion-section-icustomize_page_js h3.accordion-section-title, #accordion-section-icustomize_shop_master_css h3.accordion-section-title, #accordion-section-icustomize_shop_master_js h3.accordion-section-title",function(d){b=a(".wp-full-overlay.expanded"),c=a(".wp-full-overlay-sidebar"),g=a("#customize-preview iframe"),a("#customize-footer-actions").css("height","auto").find(".devices").addClass("hidden"),e(function(){if(a("body").addClass("icustomize-active"),a(".editor-width input").val()>="0"){var d=a(".editor-width input").val();b.css({"margin-left":d+"px"}),c.css({width:d+"px"}),u()}else b.css({"margin-left":"600px"}),c.css({width:"600px"}),a(".editor-width input").val("600"),u();if(a(".preview-width input").val()>="0"){var e=a(".preview-width input").val();g.css({"max-width":e+"px"}),u()}else g.css({"max-width":""}),a(".preview-width input").val(g.width()),u()},100)}),a("body").on("click","#accordion-section-icustomize_master_css .customize-section-back, #accordion-section-icustomize_master_js .customize-section-back, #accordion-section-icustomize_page_css .customize-section-back, #accordion-section-icustomize_page_js .customize-section-back, #accordion-section-icustomize_shop_master_css .customize-section-back, #accordion-section-icustomize_shop_master_js .customize-section-back",function(d){b=a(".wp-full-overlay.expanded"),c=a(".wp-full-overlay-sidebar"),a("#customize-footer-actions").css("height","").find(".devices").removeClass("hidden"),a("body").removeClass("icustomize-active"),b.css({"margin-left":""}),c.css({width:""})}),h.on("change",function(b,c){g=a("#customize-preview iframe"),n=g.contents().find("#icustomize-master-css-"+window.theme),e(function(){n.html(b.getValue())},2e3)}),i.on("change",function(b,c){g=a("#customize-preview iframe"),g.contents().find("#icustomize-master-js-"+window.theme).remove(),e(function(){g.contents().find("#icustomize-wc-master-js-"+window.theme).before('<script type="text/javascript" id="icustomize-master-js-'+window.theme+'">'+b.getValue()+"</script>")},2e3)}),j&&j.on("change",function(b,c){g=a("#customize-preview iframe"),p=g.contents().find("#icustomize-wc-master-css-"+window.theme),e(function(){p.html(b.getValue())},2e3)}),k&&k.on("change",function(b,c){g=a("#customize-preview iframe"),g.contents().find("#icustomize-wc-master-js-"+window.theme).remove(),e(function(){g.contents().find("#icustomize-page-js-"+window.theme).before('<script type="text/javascript" id="icustomize-wc-master-js-'+window.theme+'">'+b.getValue()+"</script>")},2e3)}),l&&l.on("change",function(b,c){g=a("#customize-preview iframe"),r=g.contents().find("#icustomize-page-css-"+window.theme),e(function(){r.html(b.getValue())},2e3)}),m&&m.on("change",function(b,c){g=a("#customize-preview iframe"),g.contents().find("#icustomize-page-js-"+window.theme).remove(),e(function(){g.contents().find("#icustomize-master-js-"+window.theme).after('<script type="text/javascript" id="icustomize-page-js-'+window.theme+'">'+b.getValue()+"</script>")},2e3)}),a("#customize-controls .dragbar").on("mousedown",function(d){d.preventDefault(),b=a(".wp-full-overlay.expanded"),c=a(".wp-full-overlay-sidebar"),b.prepend('<div id="draghelper"></div>'),a(document).on("mousemove",function(d){d.pageX>=300&&a(window).width()-d.pageX>=200&&(b.css("margin-left",d.pageX),c.css("width",d.pageX),a(".editor-width").addClass("active dragging"),a(".editor-width input").val(d.pageX))})}),a(document).on("mouseup",function(){g=a("#customize-preview iframe"),a(document).unbind("mousemove"),a("#draghelper").remove(),g.css("pointer-events",""),a(".editor-width, .preview-width").hasClass("dragging")?a("#preview-resize-left, .editor-width, .preview-width").removeClass("active dragging"):a("#preview-resize-left").removeClass("active"),u()}),f.prepend('<div id="preview-resize-left"></div>'),u(),a("#preview-resize-left").on("mousedown",function(b){b.preventDefault(),f=a("#customize-preview"),g=a("#customize-preview iframe");var c=a("#preview-resize-left");a(document).on("mousemove",function(b){if(g.css("max-width")){c.addClass("active"),g.css("pointer-events","none");var d=f.width();if(c.css("left",b.offsetX+"px"),b.offsetX<100);else if(2*b.offsetX<d-200){var e=d-2*b.offsetX;g.css("max-width",e+"px"),a(".preview-width").addClass("active dragging"),a(".preview-width input").val(e)}else g.css("max-width","100px"),a(".preview-width input").val("100")}})})})}(jQuery,wp.customize);
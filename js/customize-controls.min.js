!function(e,i){var t;t={queriedPost:new i.Value};var o='<div id="customize-resizer"><div class="control-pane"><div class="control-editor-item editor-width" title="Editor Panel Custom Width"><div class="control-editor-spacer"></div><i class="fa fa-caret-square-o-left editor"></i><div class="control-input-slide"><span class="control-input-title">Editor Custom Width (px):</span><input type="number" /></div></div></div><div class="resize-pane"><div class="control-editor-item preview-width" title="Preview Panel Custom Width"><div class="control-editor-spacer"></div><i class="fa fa-caret-square-o-right preview"></i><div class="control-input-slide"><span class="control-input-title">Preview Custom Width (px):</span><input type="number" /></div></div><div class="control-editor-item preview-desktop" title="Full > 1240px"><i class="fa fa-desktop"></i></div><div class="control-editor-item preview-laptop" title="Laptop < 1240px"><i class="fa fa-laptop"></i></div><div class="control-editor-item preview-tablet" title="Tablet < 768px"><i class="fa fa-tablet"></i></div><div class="control-editor-item preview-mobile" title="Mobile < 480px"><i class="fa fa-mobile"></i></div></div></div>',s=function(){var e=0;return function(i,t){clearTimeout(e),e=setTimeout(i,t)}}();i.bind("ready",function(){i.previewer.bind("queried-post",function(e){t.queriedPost.set(e||!1)})}),t.queriedPost.bind(function(i,t){var o=(e("body [id^=customize-control-icustomize-page-css] .customize-control-title"),e("body [id^=customize-control-icustomize-page-js] .customize-control-title"),e("body [id^=customize-control-icustomize-page-css] .customize-control-description"),e("body [id^=customize-control-icustomize-page-js] .customize-control-description"),e("body [id^=customize-control-icustomize-page-css] .CodeMirror")),s=e("body [id^=customize-control-icustomize-page-js] .CodeMirror"),c=o[0].CodeMirror,r=s[0].CodeMirror;if(i.ID){window.pid=i.ID.toString(),window.meta=i.meta,window.theme=i.theme;var a=e("#customize-preview iframe").contents().find("#icustomize-page-css-"+window.theme),n=e("#customize-preview iframe").contents().find("#icustomize-page-js-"+window.theme),d="",m="";d=a.html(),d?c.setValue(d.replace(/^\s+|\s+$/g,"")):c.setValue(""),m=n.html(),m?r.setValue(m.replace(/^\s+|\s+$/g,"")):r.setValue("")}}),wp.customize.controlConstructor.code=wp.customize.Control.extend({ready:function(){var e,i=this,t=i.container.find(".kirki-codemirror-editor"),o=i.params.choices.language;"html"===i.params.choices.language&&(o={name:"htmlmixed"}),e=CodeMirror.fromTextArea(t[0],{value:i.setting._value,mode:o,lineNumbers:!0,theme:i.params.choices.theme,height:i.params.choices.height+"px"});var s={"Alt-F":"findPersistent"};e.setOption("value",i.setting._value),e.setOption("mode",i.params.choices.language),e.setOption("lineNumbers",!0),e.setOption("theme",i.params.choices.theme),e.setOption("height",i.params.choices.height+"px"),e.addKeyMap(s),e.on("change",function(){if(t.closest("li").attr("id")=="customize-control-icustomize-page-css-"+window.theme||t.closest("li").attr("id")=="customize-control-icustomize-page-js-"+window.theme){var o={postid:window.pid,theme:window.theme,data:e.getValue()};i.setting.set(o)}else i.setting.set(e.getValue())}),t.parents(".accordion-section").on("click",function(){e.refresh()})}}),e(document).ready(function(){function i(){r=e("#customize-preview"),a=e("#customize-preview iframe");var i,t,o=r.width();a.css("max-width")?(i=parseFloat(a.css("max-width")),t=.5*(o-i)):t=0,e("#preview-resize-left").css("left",t+"px")}var t=e(".wp-full-overlay.expanded"),c=e(".wp-full-overlay-sidebar"),r=e("#customize-preview"),a=e("#customize-preview iframe");if(e("body [id^=customize-control-icustomize-icustomize-master-css] .CodeMirror").length)var n=e("body [id^=customize-control-icustomize-icustomize-master-css] .CodeMirror")[0].CodeMirror;if(e("body [id^=customize-control-icustomize-icustomize-master-js] .CodeMirror").length)var d=e("body [id^=customize-control-icustomize-icustomize-master-js] .CodeMirror")[0].CodeMirror;if(e("body [id^=customize-control-icustomize-icustomize-wc-master-css] .CodeMirror").length)var m=e("body [id^=customize-control-icustomize-icustomize-wc-master-css] .CodeMirror")[0].CodeMirror;if(e("body [id^=customize-control-icustomize-icustomize-wc-master-js] .CodeMirror").length)var l=e("body [id^=customize-control-icustomize-icustomize-wc-master-js] .CodeMirror")[0].CodeMirror;if(e("body [id^=customize-control-icustomize-page-css] .CodeMirror").length)var u=e("body [id^=customize-control-icustomize-page-css] .CodeMirror")[0].CodeMirror;if(e("body [id^=customize-control-icustomize-page-js] .CodeMirror").length)var p=e("body [id^=customize-control-icustomize-page-js] .CodeMirror")[0].CodeMirror;var w,v=a.contents().find("#icustomize-master-css-"+window.theme),f=(a.contents().find("#icustomize-master-js"+window.theme),a.contents().find("#icustomize-wc-master-css-"+window.theme));a.contents().find("#icustomize-wc-master-js"+window.theme);e("#customize-controls").append(o),e("#customize-controls").prepend('<div class="dragbar"></div>'),e("body").on("click",".control-editor-item i",function(t){t.stopPropagation(),a=e("#customize-preview iframe"),e(t.target).parent().hasClass("active")?e(t.target).parent().removeClass("active"):(e(".control-editor-item").removeClass("active"),e(t.target).not(".fa-desktop, .fa-laptop, .fa-tablet, .fa-mobile").parent().addClass("active")),e(t.target).hasClass("editor")||e(t.target).hasClass("preview")||(e(t.target).hasClass("fa-desktop")?(a.css({"max-width":""}),e(".preview-width input").val(""),e("#preview-resize-left").css("left","")):e(t.target).hasClass("fa-laptop")?(a.css({"max-width":"1239px"}),e(".preview-width input").val("1239"),i()):e(t.target).hasClass("fa-tablet")?(a.css({"max-width":"767px"}),e(".preview-width input").val("767"),i()):e(t.target).hasClass("fa-mobile")&&(a.css({"max-width":"479px"}),e(".preview-width input").val("479"),i()))}),e("body").on("change, keyup",".preview-width input",function(t){a=e("#customize-preview iframe"),s(function(){var o=e(t.target).val();o>="0"?(a.css({"max-width":o+"px"}),i()):(a.css({"max-width":""}),i())},500)}),e("body").on("change, keyup",".editor-width input",function(o){t=e(".wp-full-overlay.expanded"),c=e(".wp-full-overlay-sidebar"),s(function(){var s=e(o.target).val();s>="0"?(t.css({"margin-left":s+"px"}),c.css({width:s+"px"}),i()):(t.css({"margin-left":"600px"}),c.css({width:"600px"}),i())},500)}),e("body").on("click","#accordion-section-icustomize_master_css h3.accordion-section-title, #accordion-section-icustomize_master_js h3.accordion-section-title, #accordion-section-icustomize_page_css h3.accordion-section-title, #accordion-section-icustomize_page_js h3.accordion-section-title, #accordion-section-icustomize_shop_master_css h3.accordion-section-title, #accordion-section-icustomize_shop_master_js h3.accordion-section-title",function(o){t=e(".wp-full-overlay.expanded"),c=e(".wp-full-overlay-sidebar"),a=e("#customize-preview iframe"),console.log("theme: "+window.theme),e("#customize-footer-actions").css("height","auto").find(".devices").addClass("hidden"),s(function(){if(e("body").addClass("icustomize-active"),e(".editor-width input").val()>="0"){var o=e(".editor-width input").val();t.css({"margin-left":o+"px"}),c.css({width:o+"px"}),i()}else t.css({"margin-left":"600px"}),c.css({width:"600px"}),e(".editor-width input").val("600"),i();if(e(".preview-width input").val()>="0"){var s=e(".preview-width input").val();a.css({"max-width":s+"px"}),i()}else a.css({"max-width":""}),e(".preview-width input").val(a.width()),i()},100)}),e("body").on("click","#accordion-section-icustomize_master_css .customize-section-back, #accordion-section-icustomize_master_js .customize-section-back, #accordion-section-icustomize_page_css .customize-section-back, #accordion-section-icustomize_page_js .customize-section-back, #accordion-section-icustomize_shop_master_css .customize-section-back, #accordion-section-icustomize_shop_master_js .customize-section-back",function(i){t=e(".wp-full-overlay.expanded"),c=e(".wp-full-overlay-sidebar"),e("#customize-footer-actions").css("height","").find(".devices").removeClass("hidden"),e("body").removeClass("icustomize-active"),t.css({"margin-left":""}),c.css({width:""})}),n.on("change",function(i,t){a=e("#customize-preview iframe"),v=a.contents().find("#icustomize-master-css-"+window.theme),s(function(){v.html(i.getValue())},2e3)}),d.on("change",function(i,t){a=e("#customize-preview iframe"),a.contents().find("#icustomize-master-js-"+window.theme).remove(),s(function(){a.contents().find("#icustomize-wc-master-js-"+window.theme).before('<script type="text/javascript" id="icustomize-master-js-'+window.theme+'">'+i.getValue()+"</script>")},2e3)}),m&&m.on("change",function(i,t){a=e("#customize-preview iframe"),f=a.contents().find("#icustomize-wc-master-css-"+window.theme),s(function(){f.html(i.getValue())},2e3)}),l&&l.on("change",function(i,t){a=e("#customize-preview iframe"),a.contents().find("#icustomize-wc-master-js-"+window.theme).remove(),s(function(){a.contents().find("#icustomize-page-js-"+window.theme).before('<script type="text/javascript" id="icustomize-wc-master-js-'+window.theme+'">'+i.getValue()+"</script>")},2e3)}),u&&u.on("change",function(i,t){a=e("#customize-preview iframe"),w=a.contents().find("#icustomize-page-css-"+window.theme),s(function(){w.html(i.getValue())},2e3)}),p&&p.on("change",function(i,t){a=e("#customize-preview iframe"),a.contents().find("#icustomize-page-js-"+window.theme).remove(),s(function(){a.contents().find("#icustomize-master-js-"+window.theme).after('<script type="text/javascript" id="icustomize-page-js-'+window.theme+'">'+i.getValue()+"</script>")},2e3)}),e("#customize-controls .dragbar").on("mousedown",function(i){i.preventDefault(),t=e(".wp-full-overlay.expanded"),c=e(".wp-full-overlay-sidebar"),t.prepend('<div id="draghelper"></div>'),e(document).on("mousemove",function(i){i.pageX>=300&&e(window).width()-i.pageX>=200&&(t.css("margin-left",i.pageX),c.css("width",i.pageX),e(".editor-width").addClass("active dragging"),e(".editor-width input").val(i.pageX))})}),e(document).on("mouseup",function(){a=e("#customize-preview iframe"),e(document).unbind("mousemove"),e("#draghelper").remove(),a.css("pointer-events",""),e(".editor-width, .preview-width").hasClass("dragging")?e("#preview-resize-left, .editor-width, .preview-width").removeClass("active dragging"):e("#preview-resize-left").removeClass("active"),i()}),r.prepend('<div id="preview-resize-left"></div>'),i(),e("#preview-resize-left").on("mousedown",function(i){i.preventDefault(),r=e("#customize-preview"),a=e("#customize-preview iframe");var t=e("#preview-resize-left");e(document).on("mousemove",function(i){if(a.css("max-width")){t.addClass("active"),a.css("pointer-events","none");var o=r.width();if(t.css("left",i.offsetX+"px"),i.offsetX<100);else if(2*i.offsetX<o-200){var s=o-2*i.offsetX;a.css("max-width",s+"px"),e(".preview-width").addClass("active dragging"),e(".preview-width input").val(s)}else a.css("max-width","100px"),e(".preview-width input").val("100")}})})})}(jQuery,wp.customize);